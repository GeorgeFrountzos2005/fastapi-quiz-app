<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>Login</h2>
    <form id="loginForm">
        <input type="text" name="username" placeholder="Username" required><br>
        <input type="password" name="password" placeholder="Password" required><br>
        <button type="submit">Login</button>
    </form>
    <p id="loginResult"></p>
    <a href="register.html">Donâ€™t have an account? Register</a>
    <script>
document.getElementById("submitQuiz").onclick = function() {
    userAnswers = questions.map((q, idx) => {
        const selected = document.querySelector(`input[name="q${idx}"]:checked`);
        return selected ? parseInt(selected.value) : null;
    });
    let correct = 0;
    userAnswers.forEach((ans, idx) => {
        if(ans === questions[idx].answer) correct++;
    });
    document.getElementById("quizResult").innerText = `You got ${correct} out of ${questions.length} correct!`;

    // SEND SCORE TO BACKEND:
    const username = localStorage.getItem("username");
    if (username) {
        fetch("/api/submit_score", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({username, score: correct})
        })
        .then(r => r.json())
        .then(data => {
            document.getElementById("quizResult").innerText += "\n" + (data.message || "");
        });
    }
};
</script>
</body>
</html>
